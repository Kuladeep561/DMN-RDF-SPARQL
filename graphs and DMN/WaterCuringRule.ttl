@prefix sh: <http://www.w3.org/ns/shacl#> .
@prefix dicm: <https://w3id.org/digitalconstruction/0.5/Materials#> .
@prefix dmn: <http://www.DMN-RDF.org/DMN#> .
@prefix dicp: <https://w3id.org/digitalconstruction/0.5/Processes#> .
@prefix ocqa: <https://w3id.org/ocqa#> .
@prefix inst: <https://www.ugent.be/myAwesomeFirstBIMProject#> .
@prefix owl: <http://www.w3.org/2002/07/owl#> .



dmn:ConcreteWaterCuringRule
    a sh:NodeShape ;
    sh:targetNode owl:Thing ;
    
    sh:rule [
        a sh:SPARQLRule ;
        sh:comment "Select all of inspection of Curing";
        sh:construct """
            PREFIX sh: <http://www.w3.org/ns/shacl#> 
            PREFIX dicm: <https://w3id.org/digitalconstruction/0.5/Materials#> 
            PREFIX dmn: <http://www.DMN-RDF.org/DMN#> 
            PREFIX dicp: <https://w3id.org/digitalconstruction/0.5/Processes#> 
            PREFIX ocqa: <https://w3id.org/ocqa#> 
            PREFIX inst: <https://www.ugent.be/myAwesomeFirstBIMProject#>
            PREFIX owl: <http://www.w3.org/2002/07/owl#> 
            

            CONSTRUCT {
                ?buildingElement ocqa:hasInspection ?inspection .
            }
            WHERE {
                # Find elements that satisfy the given conditions

                ?buildingElement dicm:hasMaterial dmn:Concrete ;
                              dmn:hasActivity dmn:Curing ;
                              dicp:hasSubActivity ?subActivity .

                # Get the inspections related to the subActivity
                ?subActivity ocqa:hasInspection ?inspection .
            }
        """ ;
    ] ;
.
